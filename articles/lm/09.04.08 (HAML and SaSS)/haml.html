<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=macintosh" />
  <title>Don't Make Me Write HTML</title>
  <style>
  body {
    font-family: Georgia, serif;
    font-size: 80%;
    margin: 25px;
  }
  
  a {
    text-decoration: none;
    border-bottom: 1px dotted blue;
  }
  
  h1,h2,h3,h4, p.close {
    font-family: Tahoma, Arial, Verdana, sans-serif;
  }
  
  h2 {
    font-size: 95%;
    margin-top: 2em;
  }
  
  h4 {
    font-size: 85%;
  }
  
  img {
    border: none;
  }
  
  li {
    margin-bottom: 1em;
  }
  
  p.image {
    text-align: center;
  }
  
  tt, pre {
    font-family: Courier, sans-serif;
    font-size: 85%;
  }
  
  p.close {
    border-top: 1px solid black;
    padding: 5px 0px;
    margin-top: 2em;
    font-size: smaller;
  }

  pre {
    background: black;
    color: white;
    padding: 5px 10px;
  }
  
  pre.list {
    background: white;
    color: black;
    border: 1px solid black;
    padding: 5px 10px;
  }
  
  th, td {
    padding: 4px 12px;
    font-size: 80%;
  }
  
  th {
    text-align: left;
    text-transform: uppercase;
  }
  
  ol {
    list-style-type: none;
    padding-left: 0;
  }
</style>
</head>
<body>

<h1>
	Don't Make Me Write HTML!
	</h1>

<p>
  I hate writing HTML. Wait. Let me rephrase that. I hate writing <i>and</i> reading HTML. 
  </p>
  
<p>
  Compared to Ruby, Perl, and even SQL code, HTML is just so&#8230; verbose. Crafting open and close tags is taxing; nesting is error prone; and it's difficult to simply glance at HTML to grok its purpose. CSS is even worse. Because a stylesheet is a long, flat, unstructured list, it's nigh impossible to discern those cumulative rules that apply to nested elements. A good editor helps, but syntax coloring is often just a shiny veneer. 
  </p>
  
<p>
  And many concur with my distaste for HTML. Alternatives, such as Textile and <a href="http://daringfireball.net/projects/markdown/">Markdown</a>&mdash;aptly named since it's intended to be the opposite of markup&mdash;provide author-friendly shorthand that is programatically promoted into full-blown HTML. For example, the Markdown snippet... 
  </p>
  
<pre class="list">
Ordered lists use numbers followed by periods:

    1.  Bird
    2.  McHale
    3.  Parish
</pre>

<p>
  ... produces the HTML...
</p>

<pre class="list">
&lt;p&gt;
  Ordered lists use numbers followed by periods:
  &lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Bird&lt;/li&gt;
  &lt;li&gt;McHale&lt;/li&gt;
  &lt;li&gt;Parish&lt;/li&gt;
  &lt;/ol&gt;
</pre>

<p>
  Markdown is very natural to write&mdash;it resembles text you might put in an email, say&mdash; and thus very easy to read, too. It's no wonder that many content management systems, blogs, and wikis support simplified markup of Markdown's ilk. 
  </p>

<p>
  Ideally, Markdown would replace weighty, tagged text in my applications, but it wasn't designed to be a wholesale replacement for HTML and provides no relief for CSS. Yet, the notion is very appealing: Keep (or add) structure, lose the infernal typing. 
  </p>
  
<p>
  And that's the exact charter of <a href="http://haml.hamptoncatlin.com/">HAML and companion SaSS</a>. HAML (short for XHTML Abstraction Markup Language) expresses HTML in an outline form, while SaSS (an acronym for Syntactically Awesome StyleSheets) does the same for CSS. Both provide conveniences such as macros and expressions, and structure is implied with active white space (a la Python). You can also embed code in outline form: no blocks required.  
  </p>
  
<p>
  I use HAML and SaSS with Rails, but implementations of HAML are available for Merb, <a href="http://phphaml.sourceforge.net/">PHP 5</a>, <a href="http://www.ghrml.org/">Python</a>, and .<a href="http://andrewpeters.net/2007/12/19/introducing-nhaml-an-aspnet-mvc-view-engine/">NET</a>. And if your programming language does not yet support HAML or SaSS, have no fear! There are command-line utilities to convert the minimalist templates into HTML and CSS. There's also a pair of utilities to reduce HTML and CSS to HAML and SaSS, respectively. 
  </p>

<p>
  I eschew other templating forms in favor of HAML. It makes me very productive, even happy to craft Web pages and forms. Let's take a look.  
  </p>


<h2>
	Less Code, More Joy
	</h2>
  
<p>
  At left is HAML; at right is the equivalent HTML generated with the <tt>haml</tt> command-line utility. 
  </p>
  
<div style="clear: both;">
  <div style="float: left; width: 45%;">
<pre class="list">
!!! XML
!!! 
%html
  %head
    %title 
      Example
  %body
    %h1 You can place text on this line
    %p#vip.prose  
      Or you can put more lengthy text 
      here as content. 
</pre>
  </div>
  <div style="float: right; width: 50%;">
<pre class="list">
&lt;?xml version='1.0' encoding='utf-8' ?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD 
  XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/..."&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;
      Example
    &lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id='main'&gt;
      &lt;h1&gt;You can place text on this line&lt;/h1&gt;
      &lt;p class='prose' id='vip'&gt;
        Or you can put more 
        lengthy text here as content.
      &lt;/p&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
  </div>  
</div>

<div style="clear: both;">
</div>

<p>
  HAML is concise and its syntax is simple. For instance:
  </p>

<ul>
  <li>To use an element, preface its tag with <tt>%</tt>, such as <tt>%head</tt> and <tt>%p</tt>. </li>

  <li>You can assign an ID to an element with the clause <tt>#<i>your_id</i></tt>. You can assign one or more classes to an element with a set of  <tt>.<i>your_class</i></tt> clauses. You can also combine the two kinds of clauses.  </li>

  <li>If the element is a <tt>div</tt>, you can omit <tt>%div</tt> and it is inferred.</li>

  <li>To nest an element or place content within an element, simply indent two spaces. For convenience, you can also place content on the same line as the element, if the text is short. </li>
  </ul>
  
<p>
  This first example does not demonstrate all the syntax available. You can find the complete HAML reference <a href="http://haml.hamptoncatlin.com/docs/rdoc/classes/Haml.html">online</a>.  
  </p>
  
<p>
  HAML is full of other tricks, too. If you like Markdown, you can embed it in HAML. A <i>filter</i> expands the Markdown in place. This snippet&#8230;
  </p>
  
<pre class="list">
%div
  :markdown
    Example 2
    =======
    
    Hello, *World*  
</pre>

<p>
  &#8230; produces:
  </p>
  
<pre class="list">
&lt;div&gt;
  &lt;h1&gt;Example 2&lt;/h1&gt;
  &lt;p&gt;Hello, &lt;em&gt;World&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
</pre>

<p>
	In the HAML code, the keyword <tt>:markdown</tt> invokes the eponymous filter. A filter exists for JavaScript, Textile, SaSS, plain text, and Ruby code, among others. 
	</p>
	
<p>
	And because all browsers aren't equal, you can also insert Internet Explorer conditionals using <tt>/[<i>condition</i>]</tt>. 
	</p>
	
<pre class="list">
/if[IE]
  %p 
    Use the Firefox, Luke. 
</pre>

<p>
	The slash (<tt>/</tt>) denotes a comment in HAML. You can use slash to comment a single line or an entire, indented section.  
	</p>
	
<pre class="list">
/ This is a single-line comment
/
  #footnote
    %p None of this will render since its part of the comment
</pre>    

<p>
	Of course, HAML really shines when you mix it with Ruby and a framework such as Rails or Merb.  You can interpret and display Ruby code with the equal sign (<tt>=</tt>) operator (equivalent to <tt>&lt;%=</tt> in ERB, and embed statements and blocks with the minus sign (<tt>-</tt>). This code&#8230;
	</p>

<pre class="list">
- name = 'Zeppo'
%p= name

- names = %w( Groucho Chico Harpo )
- names.each do |n|
  %p
    = n.upcase
</pre>

&#8230; produces:

<pre class="list">
&lt;p&gt;
  Zeppo
&lt;/p&gt;

&lt;p&gt;
  GROUCHO
&lt;/p&gt;
&lt;p&gt;
  CHICO
&lt;/p&gt;
&lt;p&gt;
  HARPO
&lt;/p&gt;
</pre>

<p>
	Like an element, a block of code is defined with active white space. 
	</p>


<h2>
	Getting SaSS-y
	</h2>
	
<p>
	Like HAML, SaSS provides an outline-like syntax to define styles. For comparsion, SaSS is on the left, and traditional CSS is at right. Again, you can manually produce the CSS from its shorthand with the <i>sass</i> command. 
	</p>

<div style="clear: both;">
  <div style="float: left; width: 45%;">
<pre class="list">
!listing_color = white

#main
  :font-size 1.2em
  pre.list 
    :color !listing_color
    :background black
    
  p
    :font
      :family Tahoma
      :size larger
      :weight bold
</pre>
  </div>
  <div style="float: right; width: 50%;">
<pre class="list">
#main {
  font-size: 1.2em; }
  #main pre.list {
    color: white;
    background: black; }
  #main p {
    font-family: Tahoma;
    font-size: larger;
    font-weight: bold; }
</pre>
  </div>  
</div>

<div style="clear: both;">
</div>

<p>
	Marching from top to bottom:
	</p>
	
<ul>
	<li>You can create constants with the exclamation point (<tt>!</tt>). You can then use those constants throughout your styles. You can also perform arithmetic, concatenation, and other operations on the constants. </li>

	<li>To create a style, name the kind of element, an ID, or class as you would in CSS, then indent and list the attributes and values. Here, I've used one form of syntax, <tt>:font-size 1.2em</tt>. If you prefer, you can also use the CSS-like syntax, <tt>font-size: 1.2em</tt>, but omit the trailing semicolon (<tt>;</tt>). </li>
	
	<li>To create a style to affect a nested element, simply indent the element within another and define your attributes. The example here defines styles for a paragraph of class <tt>list</tt> that occurs within the div <tt>main</tt>. Look at the CSS SaSS generates. The stylesheet is still a flat-file, but SaSS uses indentation to reinforce the relationship between the two elements. </li>

	<li>To conserve typing, SaSS lets you group like attributes in a namespace. For example, the namespace <tt>font</tt> contains <tt>family</tt>, <tt>size</tt>, and <tt>weight</tt>. You can use a namespace for <tt>background</tt>, <tt>border</tt>, and <tt>margin</tt>, among others. </li>
	</ul>

<p>
	Beyond the lack of structure in a stylesheet, another problem is repetition. Styles often share the same attribute or set of attributes, yet rather than write something akin to &#8230;
	</p>
	
<pre class="list">
<i>element.class1, element.class2, element.class3 {
  attributeX: valueX;
  attributeY: valueY;
}</i>
</pre>

&#8230; you commonly see &#8230;

<pre class="list">
<i>element.class1 {
  attributeX: valueX;
  attributeY: valueY;
}</i>

<i>element.class2 {
  attributeX: valueX;
  attributeY: valueY;
}</i>

<i> element.class3 {
  attributeX: valueX;
  attributeY: valueY;
}</i>
</pre>

<p>
	Arguably, the latter form is easier to comprehend, and it seems as styles permute during the lifetime of a project, definitions proliferate. 
	</p>
	
<p>
	The SaSS mixin something like a macro. You can name a mixin, define its attributes and styles, and then include the mixin in any other style, where it "expands" in-place. 
	</p>
	
<p>
	For example, let's say you want to define a typeface style for all headings (section, table, captions, and so on). You can create a mixin and include it wherever its needed. This snippet of SaSS&#8230;
	</p>
	
<pre class="list">
=heading-typeface
  :font
    :family Tahoma
    :weight bold
    :style italic
    
h1, h2, h3
  +heading-typeface
</pre>

<p>
&#8230; produces:
	</p>
	
<pre class="list">
h1, h2, h3 {
  font-family: Tahoma;
  font-weight: bold;
  font-style: italic; }
</pre>

<p>
	Slick! No more hunting down errant exceptions. 
	</p>


<h2>
	Better Than Sliced Bread
	</h2>

<p>
	There is even more to like about HAML and SaSS, so read the project website, which has a tutorial and expansive documentation with examples. 
	</p>

<p>
	If you are developing in Rails, you can download the gem and run the generator to embed HAML in your project in moments. HAML template files are named <i>.html.haml</i>;  SaSS files are named <i>.sass</i> and typically are placed in <i>public/stylesheets/sass</i>. When your application runs, HAML generates the corresponding CSS for each SaSS file and places the resulting stylesheet  in <i>public/stylesheets</i>. Simply reference the CSS file with <tt>=stylesheet_link_tag</tt> in your layout. 
	</p>
	
<p>
	Now, what will you do with all those saved keystrokes? 
	</p>
	
<p class="close">
	Martin Streicher is a freelance Ruby on Rails developer, the author of IBM developerWorks's monthly <i>Speaking Unix</i> column, and a widely-published author on open source technologies. He is also Editor-in-Chief Emeritus of <i>Linux Magazine</i> and has the fez to prove it. You can reach Martin at martin.streicher@gmail.com. 
	</p>	
</body>
</html>
